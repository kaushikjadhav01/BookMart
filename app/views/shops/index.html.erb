<!-- section start -->
<section class="section-big-pt-space ratio_asos b-g-light">
  <div class="collection-wrapper">
    <div class="custom-container">
      <div class="row">
        <div class="col-sm-3 collection-filter category-page-side">
          <!-- side-bar colleps block stat -->
          <div class="collection-filter-block creative-card creative-inner category-side">
            <!-- rating filter start -->
            <%= form_tag(shops_path, method: :get) do %>
            <div class="collection-mobile-back">
              <span class="filter-back"><i class="fa fa-angle-left" aria-hidden="true"></i> back</span></div>
            <div class="collection-collapse-block open">
            <h3 class="mt-0" 
              style="position: relative;
                      cursor: pointer;
                      text-transform: uppercase;
                      font-size: 16px;
                      color: #333333;
                      font-weight: 600;
                      letter-spacing: 0.05em;
                      line-height: 1;">Filters</h3>
                  <div style="padding-left: 180px; margin-top:-20px;">
                    <%= button_tag type: "submit", class: 'btn btn-lg btn-warning' do %>
                      <i class="bi-funnel-fill" style="color:black;"></i>
                    <% end %>
                  </div>
              <h3 class="mt-0" 
              style="position: relative;
                      cursor: pointer;
                      text-transform: uppercase;
                      font-size: 16px;
                      color: #333333;
                      font-weight: 600;
                      letter-spacing: 0.05em;
                      line-height: 1;">By Average Rating</h3>
              <div class="collection-collapse-block-content">
                <div class="collection-brand-filter">
                  <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                              <div class="qty-box" style="padding: 0px 0px 40px 0px">
                                <div class="col-sm-4">
                                  <%= number_field_tag :average_rating, 0, min:  0, max:  5, class: "qty-adj form-control", style: "height:45px;color:#1c3481;font-family: PT Sans, sans-serif;"%>
                                </div>
                              </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- author filter start -->
            <div class="collection-mobile-back">
              <span class="filter-back"><i class="fa fa-angle-left" aria-hidden="true"></i> back</span></div>
            <div class="collection-collapse-block open">
              <h3 class="mt-0" 
              style="position: relative;
                      cursor: pointer;
                      text-transform: uppercase;
                      font-size: 16px;
                      color: #333333;
                      font-weight: 600;
                      letter-spacing: 0.05em;
                      line-height: 1;">By Author</h3>
              <div class="collection-collapse-block-content">
                <div class="collection-brand-filter">
                  <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                              <div class="qty-box" style="padding: 0px 0px 40px 0px">
                                <div class="col-sm-4">
                                  <%= text_field_tag :author, nil, class: "qty-adj form-control", style: "height:45px;color:#1c3481;font-family: PT Sans, sans-serif;"%>
                                </div>
                              </div>
                  </div>
                </div>
              </div>
            </div>
            <%end%>
            <!-- brand filter start -->
            <div class="collection-mobile-back">
              <span class="filter-back"><i class="fa fa-angle-left" aria-hidden="true"></i> back</span></div>
            <div class="collection-collapse-block open">
              <h3 class="mt-0" 
              style="position: relative;
                      cursor: pointer;
                      text-transform: uppercase;
                      font-size: 16px;
                      color: #333333;
                      font-weight: 600;
                      letter-spacing: 0.05em;
                      line-height: 1;">Language</h3>
              <div class="collection-collapse-block-content">
                <div class="collection-brand-filter">
                  <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                    <input type="checkbox" class="custom-control-input form-check-input" id="zara">
                    <label class="custom-control-label form-check-label" for="zara">English</label>
                  </div>
                  <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                    <input type="checkbox" class="custom-control-input form-check-input" id="vera-moda">
                    <label class="custom-control-label form-check-label" for="vera-moda">Spanish</label>
                  </div>
                  <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                    <input type="checkbox" class="custom-control-input form-check-input" id="forever-21">
                    <label class="custom-control-label form-check-label" for="forever-21">French</label>
                  </div>
                  <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                    <input type="checkbox" class="custom-control-input form-check-input" id="roadster">
                    <label class="custom-control-label form-check-label" for="roadster">Hindi</label>
                  </div>
                  <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                    <input type="checkbox" class="custom-control-input form-check-input" id="only">
                    <label class="custom-control-label form-check-label" for="only">Japanese</label>
                  </div>
                </div>
              </div>
            </div>
            <!-- color filter start here -->
            <div class="collection-collapse-block open">
              <h3 style="position: relative;
  cursor: pointer;
  text-transform: uppercase;
  font-size: 16px;
  color: #333333;
  font-weight: 600;
  letter-spacing: 0.05em;
  line-height: 1;
  padding-top:25px;">Genres</h3>
              <div class="collection-collapse-block-content">
                <div class="color-selector">
                  <ul>
                    <li >
                      <div class="color-1 active" ></div> Romance (14)
                    </li>
                    <li >
                      <div class="color-2"></div> Mystery(24)
                    </li>
                    <li >
                      <div class="color-3"></div> Sci Fi(18)
                    </li>
                    <li >
                      <div class="color-4"></div> History(10)
                    </li>
                    <li >
                      <div class="color-5"></div> Arts(9)
                    </li>
                    <li >
                      <div class="color-6"></div> Science(11)
                    </li>
                    <li >
                      <div class="color-7"></div> Mathematics(15)
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- size filter start here -->
            <div class="collection-collapse-block open">
              <h3 style="position: relative;
  cursor: pointer;
  text-transform: uppercase;
  font-size: 16px;
  color: #333333;
  font-weight: 600;
  letter-spacing: 0.05em;
  line-height: 1;
  padding-top:15px;">Type</h3>
              <div class="collection-collapse-block-content">
                <div class="size-selector">
                  <div class="collection-brand-filter">
                    <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                      <input type="checkbox" class="custom-control-input form-check-input" id="small">
                      <label class="custom-control-label form-check-label" for="small">Hardcover</label>
                    </div>
                    <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                      <input type="checkbox" class="custom-control-input form-check-input" id="mediam">
                      <label class="custom-control-label form-check-label" for="mediam">Paperback</label>
                    </div>
                    <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                      <input type="checkbox" class="custom-control-input form-check-input" id="large">
                      <label class="custom-control-label form-check-label" for="large">Softcover</label>
                    </div>
                    <div class="custom-control custom-checkbox  form-check collection-filter-checkbox">
                      <input type="checkbox" class="custom-control-input form-check-input" id="extralarge">
                      <label class="custom-control-label form-check-label" for="extralarge">Picture Books</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <!-- silde-bar colleps block end here -->
          
          <!-- side-bar banner start here -->
          <div class="collection-sidebar-banner">
            <a href="javascript:void(0)"><img src="../assets/images/category/side-banner.png" class="img-fluid " alt=""></a>
          </div>
          <!-- side-bar banner end here -->

        </div>
        <div class="collection-content col">
          <div class="page-main-content">
            <div class="row">
              <div class="col-sm-12">
                <div class="top-banner-wrapper">
                  <a href="product-page(left-sidebar).html"><img src="../assets/images/category/1.jpg" class="img-fluid " alt=""></a>
                </div>
                <div class="collection-product-wrapper">
                  <div class="product-top-filter">
                    <div class="row">
                      <div class="col-xl-12">
                        <div class="filter-main-btn"><span class="filter-btn  "><i class="fa fa-filter" aria-hidden="true"></i> Filter</span></div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-12">
                        <div class="product-filter-content">
                          <div class="search-count">
                            <h5>Showing Books 1-<%=@books.size%> of <%=@books.size%> Result</h5></div>
                          
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="product-wrapper-grid product">
                    <div class="row">
                      <% if @books.size == 0 && current_user.is_admin? %>
                          <h5>No books found <%= link_to "Add New book?", new_book_path %></h5>
                      <%end%>
                      <% @books.each do |book| %>
                      <div class="col-xl-3 col-md-4 col-6  col-grid-box">
                        <div class="product-box">
                          <div class="product-imgbox">
                            <div class="product-front">
                              <%= link_to image_tag(book.image, style: 'height:350px;width:245px;'), shop_path(book), class: "img-fluid" %>
                            </div>
                            <div class="product-back">
                              <%= link_to image_tag(book.image, style: 'height:350px;width:245px;'), shop_path(book), class: "img-fluid" %>
                            </div>
                          </div>
                          <div class="product-detail detail-center detail-inverse">
                            <div class="detail-title">
                              <div class="detail-left">
                                <div style="padding-left: 8px; color:#ffa800;"> 
                                <% if book.average_rating %>
                                  <%= book.average_rating %>
                                  <% book.average_rating.divmod(1)[0].to_i.times do %>
                                  <i class="bi-star-fill"></i>
                                  <%end%>
                                  <% if book.average_rating.divmod(1)[1].to_f >= 0.5 %>
                                  <i class="bi-star-half"></i>
                                  <%end%>
                                <%else%>
                                0
                                <% 5.times do %>
                                  <i class="bi-star"></i>
                                  <%end%>
                                <%end%>
                                </div>
                                  <h6 class="price-title" style="padding-left: 9px;">
                                    <%= book.name%> <br/> 
                                    <%=book.author%> <br/>
                                    <%=book.publisher%>
                                  </h6> </a>
                              </div>
                              <div class="detail-right">
                                <div class="price"> Stock: <%= book.stock %> </div>
                              </div>
                              <div class="detail-right">
                                <div class="price"> Price: <%= book.price %> </div>
                              </div>
                            </div>
                            <div class="icon-detail">
                            <%= form_for @transaction_item, remote: true  do |f|%>
                              <%= f.hidden_field :book_id, :value => book.id %>
                              <%= f.hidden_field :user_id, :value => current_user.id %>
                              <div class="qty-box" style="padding: 0px 0px 40px 50px">
                                <div class="col-sm-4">
                                  <%= f.number_field :quantity, :value => 1, :min =>  1, class: "qty-adj form-control", style: "height:45px;color:#1c3481;font-family: PT Sans, sans-serif;"%>
                                </div>
                                <div style="font-size: 30px;padding-left: 20px">
                                  <%= f.button nil, class: "tooltip-top add-cartnoty" do %>
                                    <i class="bi-cart-plus-fill" style="color:#1c3481;"></i>
                                  <% end %>
                                </div>
                              </div>
                              
                              <% if session[:errors] && session[:errors][0] == book.id %>
                              <div style= "color: red;font-family: PT Sans, sans-serif;margin-top: -20px;margin-left: 80px;">
                                  <%= f.label "Only #{book.stock} in stock", style: "color: red;"%>
                              </div>
                              <% end %>
                              
                            <% end %>
                            </div>
                          </div>
                        </div>
                      </div>
                      <% end %>
                    </div>
                  </div>
                  <div class="product-pagination">
                    <div class="theme-paggination-block">
                      <div class="row">
                        <div class="col-xl-6 col-md-6 col-sm-12">
                          <nav aria-label="Page navigation">
                            <ul class="pagination">
                              <li class="page-item"><a class="page-link" href="javascript:void(0)" aria-label="Previous"><span aria-hidden="true"><i class="bi bi-chevron-left" aria-hidden="true"></i></span> <span class="sr-only">Previous</span></a></li>
                              <li class="page-item "><a class="page-link" href="javascript:void(0)">1</a></li>
                              <li class="page-item"><a class="page-link" href="javascript:void(0)">2</a></li>
                              <li class="page-item"><a class="page-link" href="javascript:void(0)">3</a></li>
                              <li class="page-item"><a class="page-link" href="javascript:void(0)" aria-label="Next"><span aria-hidden="true"><i class="bi bi-chevron-right" aria-hidden="true"></i></span> <span class="sr-only">Next</span></a></li>
                            </ul>
                          </nav>
                        </div>
                        <div class="col-xl-6 col-md-6 col-sm-12">
                          <div class="product-search-count-bottom">
                            <h5>Showing Books 1-<%=@books.size%> of <%=@books.size%> Result</h5></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- section End -->